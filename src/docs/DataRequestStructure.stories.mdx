import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="CRUD/Data request structure" />

## Data request structure

** \* This is very important!**

You can inject your data request apis to vue-crud-toolkit to make your crud application.

Your apis should have the following structure:

```typescript
// Get list items with pagination
type ApiPagination = ({
  page,
  perPage,
  filter,
  sort,
}: {
  page: number;
  perPage: number;
  filter: any;
  sort: any;
}) => Promise<{
  count: number;
  items: any[];
  pageInfo: {
    currentPage: number;
    perPage: number;
    pageCount: number;
    itemCount: number;
    hasNextPage: boolean;
    hasPreviousPage: boolean;
  };
}>;

// Get list items with pagination in the trash
type ApiTrashPagination = ({
  page,
  perPage,
  filter,
  sort,
}: {
  page: number;
  perPage: number;
  filter: any;
  sort: any;
}) => Promise<{
  count: number;
  items: any[];
  pageInfo: {
    currentPage: number;
    perPage: number;
    pageCount: number;
    itemCount: number;
    hasNextPage: boolean;
    hasPreviousPage: boolean;
  };
}>;

// Count items
type ApiNormalCount = (filter: any) => Promise<number>;

// Count items in the trash
type ApiTrashCount = (filter) => Promise<number>;

// Create new item
type ApiCreate = (data: any) => Promise<{ id }>;

// Get item detail
type ApiDetail = (id: string | number) => Promise<any>;

// Update item
type ApiUpdate = (id: string | number, data: any) => Promise<{ id }>;

// Remove item
type ApiRemove = (id: string | number) => Promise<any>;

// Restore item
type ApiRestore = (id: string | number) => Promise<any>;

// Purge item
type ApiPurge = (id: string | number) => Promise<any>;

// Empty trash
type ApiEmptyTrash = () => Promise<any>;
```
