import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="CRUD/Form structure" />

## Form structure

```vue
<template>
  <v-form ref="form" v-model="valid">
    <v-text-field
      v-model="formData.title"
      :rules="[rules.required]"
      aria-required
      label="Title"
    />
    <v-textarea
      v-model="formData.description"
      :rules="[rules.required]"
      aria-required
      label="Description"
    />
  </v-form>
</template>

<script>
export default {
  props: {
    formBus: { type: Object, default: null },
    beginFormData: {
      type: Object,
      required: true,
    },
    sendRequest: {
      type: Function,
      required: true,
    },
  },
  data() {
    return {
      valid: false,
      formData: JSON.parse(JSON.stringify(this.beginFormData)),
      rules: {
        required: (value) => !!value || "This field is required",
      },
    };
  },

  created() {
    if (this.formBus) {
      this.formBus.$on("submit", this.submit);
    }
  },

  destroyed() {
    if (this.formBus) {
      this.formBus.$off("submit", this.submit);
    }
  },

  methods: {
    submit() {
      this.$refs.form.validate();
      if (this.valid) {
        this.sendRequest(this.formData);
      }
    },
  },
};
</script>

<style></style>
```
